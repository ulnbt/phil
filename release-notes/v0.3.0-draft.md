# v0.3.0 (Draft)

Release date: TBD

## Release Readiness Checklist

- [ ] #7 phase-1 scope complete
- [ ] #8 phase-1 scope complete (only items intended for v0.3.0)
- [ ] `CHANGELOG.md` entry finalized
- [ ] `uv run --group dev pytest` passes
- [ ] `uv run --group dev pytest --cov=calc --cov-report=term-missing --cov-fail-under=90` passes
- [ ] Release body below reviewed against shipped behavior

## Highlights

- Reliability-first release: safer handling of pathological expressions and faster recovery on failure paths.
- Stronger correctness posture by reducing hand-rolled math internals in favor of SymPy-native behavior.
- Better consistency across one-shot and REPL for edge-case handling.

## User-Visible Changes

- Add:
  - Guardrails for dangerous growth paths (huge powers/factorials) with actionable `E:` + `hint:` feedback.
- Improve:
  - Cancellation/evaluation order for large expressions where symbolic simplification can avoid catastrophic materialization.
  - REPL recovery behavior after guarded failures.
- Change:
  - Internal simplification strategy in scoped paths to prefer targeted SymPy primitives over broad rewriting.

## Reliability and Correctness

- Guardrails:
  - Pathological expressions no longer hang or crash normal terminal workflows.
- Error recovery:
  - Clear next-step hints for unsafe or ambiguous input.
- Parser/safety:
  - Existing parser hardening contract remains intact (`GLOBAL_DICT`, blocked tokens, input limits).

## Documentation and UX

- Help/tutorial/examples updated only where needed to explain new edge-case behavior.
- Contributor docs updated for release-note drafting workflow.

## Upgrade

Install/update:

```bash
uv tool upgrade philcalc
```

Validate:

```bash
phil :version
phil :check
```

## Linked Issues

- #7 Edge-case reliability: correctness, fast answer, fast recovery
- #8 Prefer SymPy built-ins over custom math plumbing

## GitHub Release Body (Final Copy)

````md
## Highlights

- Reliability-first release: safer handling of pathological expressions and faster recovery on failure paths.
- Stronger correctness posture by reducing hand-rolled math internals in favor of SymPy-native behavior.
- Better consistency across one-shot and REPL for edge-case handling.

## User-Visible Changes

- Add:
  - Guardrails for dangerous growth paths (huge powers/factorials) with actionable `E:` + `hint:` feedback.
- Improve:
  - Cancellation/evaluation order for large expressions where symbolic simplification can avoid catastrophic materialization.
  - REPL recovery behavior after guarded failures.
- Change:
  - Internal simplification strategy in scoped paths to prefer targeted SymPy primitives over broad rewriting.

## Reliability and Correctness

- Guardrails:
  - Pathological expressions no longer hang or crash normal terminal workflows.
- Error recovery:
  - Clear next-step hints for unsafe or ambiguous input.
- Parser/safety:
  - Existing parser hardening contract remains intact (`GLOBAL_DICT`, blocked tokens, input limits).

## Upgrade

```bash
uv tool upgrade philcalc
```

```bash
phil :version
phil :check
```
````
